# 1C-thin-client-Installer

Для случаев когда контроллера домена нет и пользователи 1С находятся в разных частях страны, а запустить установку тонкого клиента 1С самостоятельно для них сродни покорения Эвереста, я написал этот скрипт, который достаточно только запустить и подождать когда установится тонкий клиент 1С.

## Инструкции по настройке и сборке исполняемого файла.

### Предварительные требования

Необходимо установить для работы с проектом:

- Язык программирования [Go](https://go.dev/dl/) 
- [go-winres](https://github.com/tc-hib/go-winres) - для установки которого нужно ввести команду
```sh
go install github.com/tc-hib/go-winres@latest
```

### Подготовка ZIP архива с тонким клиентом 1С
1. Нужно скачать необходимую версию тонкого клиента 1С. Обычно формат архива `rar`.
2. Распаковать архив так, чтобы он был в отдельной папке (например `setuptc64_8_3_24_1586`).
3. Запаковать эту папку в архив `zip`.
4. Выгрузить архив в любое удобное облако и получить ссылку на скачивание.

*Примечание: ссылку нужно указать такую, которая при вставке в поисковую строку сразу начинает скачивание файла. 
Пример: если выгрузить файл на Яндекс.Диск и получить ссылку на скачивание, то скачается информация о файле, а не сам файл. Нужно указать конкретную ссылку на файл. Для получения ссылки я использую сервис `https://getfile.dokpub.com/yandex/get/ссылка-на-яндекс-диске`.*

### Изменение параметров установщика

1. Клонируйте репозиторий:
   ```sh
   https://github.com/b4rgut/1C-thin-client-Installer.git
   ```
2. Перейдите в директорию проекта
   
3. Скорректируйте `main.go` под ваши параметры

	3.1. Укажите ссылку на скачивание файла:
	```go
	url := "ваша ссылка на скачивание"
	```
	3.2. Укажите данные msi файла:
	```go
	msifile := msi{
		filename:   "имя-файла.msi",
		transforms: "имя-файла.mst",
		dir:        filepath.Join(destDir, "имя-zip-архива"),
	}
	```   

### Сборка

1. Выполните сборку go-winres:
```sh
go-winres make
```
Она нужна для того чтобы встроить в исполняемый файл описание иконки и другие ресурсы, а самое главное чтобы скрипт работал только от имени администратора.

2. Выполните сборку проекта:
```sh
$Env:CGO_ENABLED=0; $Env:GOOS='windows'; $Env:GOARCH='amd64'; go build -o bin/1C-Installer.exe
```

После чего в папке `bin` появится исполняемый файл `1C-Installer.exe`. Который можно отправить клиентам любым удобным способом
